* Preferences
#+begin_src emacs-lisp
  (setq-default help-window-select t                  ; Focus new help windows when opened
                delete-by-moving-to-trash t           ; Delete files to trash
                uniquify-buffer-name-style 'forward   ; Uniquify buffer names
                sentence-end-double-space nil         ; Use a single space after dots
                mouse-yank-at-point t                 ; Yank at point rather than pointer
                )

  ;; Scrolling
  (setq-default scroll-margin                   0
                scroll-conservatively           101
                scroll-preserve-screen-position t)

  ;; Tab
  (setq-default indent-tabs-mode  nil
                tab-width         4
                tab-always-indent 'complete)

  ;; Highlighting
  (setq-default search-highlight t
                query-replace-highlight t)

  (when window-system (global-hl-line-mode 1))
  (when window-system (global-prettify-symbols-mode 1))
  (fset 'yes-or-no-p 'y-or-n-p)           ; Replace yes/no prompts with y/n

  (recentf-mode 1)
  (blink-cursor-mode 0)
  (show-paren-mode 1)
  (line-number-mode 1)
  (column-number-mode 1)
  (electric-pair-mode 1)
  (global-subword-mode 1)          ; Iterate through CamelCase words.
  (delete-selection-mode 1)        ; Replace region when inserting text.
  (global-auto-revert-mode 1)      ; Revert buffers when the underlying file has changed.
  (save-place-mode 1) ; Remember and restore the last cursor position of opened files.

  ;; Save what you enter into minibuffer prompts.
  (setq history-length 25)
  (savehist-mode 1)

  ;; Run at full power please
  (put 'upcase-region 'disabled nil)
  (put 'downcase-region 'disabled nil)
  (put 'narrow-to-region 'disabled nil)
  (put 'narrow-to-page 'disabled nil)
  (put 'erase-buffer 'disabled nil)
  (put 'scroll-left 'disabled nil)
  (put 'dired-find-alternate-file 'disabled nil)

  ;; Sync Copy/Paste Clipboards with Linux X11
  (setq x-select-enable-clipboard t ; after copy Ctrl+c in Linux X11, you can paste by `yank' in emacs
        x-select-enable-primary t)  ; after mouse selection in X11, you can paste by `yank' in emacs
#+end_src

* Visualize
** Rainbow mode
#+begin_src emacs-lisp
  (use-package rainbow-mode
    :ensure t
    :hook (prog-mode . rainbow-mode))

  (use-package rainbow-delimiters
    :ensure t
    :init
    (add-hook 'prog-mode-hook #'rainbow-delimiters-mode))
#+end_src

* Interface enhancement
** vertico
#+begin_src emacs-lisp
  ;; Enable vertico
  (use-package vertico
    :ensure t
    :init
    (vertico-mode)

    ;; Different scroll margin
    ;; (setq vertico-scroll-margin 0)

    ;; Show more candidates
    ;; (setq vertico-count 20)

    ;; Grow and shrink the Vertico minibuffer
    ;; (setq vertico-resize t)

    ;; Optionally enable cycling for `vertico-next' and `vertico-previous'.
    ;; (setq vertico-cycle t)
    )

  ;; A few more useful configurations...
  (use-package emacs
    :init
    ;; Add prompt indicator to `completing-read-multiple'.
    ;; Alternatively try `consult-completing-read-multiple'.
    (defun crm-indicator (args)
      (cons (concat "[CRM] " (car args)) (cdr args)))
    (advice-add #'completing-read-multiple :filter-args #'crm-indicator)

    ;; Do not allow the cursor in the minibuffer prompt
    (setq minibuffer-prompt-properties
	  '(read-only t cursor-intangible t face minibuffer-prompt))
    (add-hook 'minibuffer-setup-hook #'cursor-intangible-mode)

    ;; Emacs 28: Hide commands in M-x which do not work in the current mode.
    ;; Vertico commands are hidden in normal buffers.
    ;; (setq read-extended-command-predicate
    ;;       #'command-completion-default-include-p)

    ;; Enable recursive minibuffers
    (setq enable-recursive-minibuffers t))
#+end_src

** orderless
#+begin_src emacs-lisp
  ;; Optionally use the `orderless' completion style. See
  ;; `+orderless-dispatch' in the Consult wiki for an advanced Orderless style
  ;; dispatcher. Additionally enable `partial-completion' for file path
  ;; expansion. `partial-completion' is important for wildcard support.
  ;; Multiple files can be opened at once with `find-file' if you enter a
  ;; wildcard. You may also give the `initials' completion style a try.
  (use-package orderless
    :ensure t
    :init
    ;; Configure a custom style dispatcher (see the Consult wiki)
    ;; (setq orderless-style-dispatchers '(+orderless-dispatch)
    ;;       orderless-component-separator #'orderless-escapable-split-on-space)
    (setq completion-styles '(orderless)
	  completion-category-defaults nil
	  completion-category-overrides '((file (styles partial-completion)))))
#+end_src

** Marginalia
#+begin_src emacs-lisp
  ;; Enable richer annotations using the Marginalia package
  (use-package marginalia
    :ensure t
    ;; Either bind `marginalia-cycle` globally or only in the minibuffer
    :bind (("M-A" . marginalia-cycle)
	   :map minibuffer-local-map
	   ("M-A" . marginalia-cycle))

    ;; The :init configuration is always executed (Not lazy!)
    :init

    ;; Must be in the :init section of use-package such that the mode gets
    ;; enabled right away. Note that this forces loading the package.
    (marginalia-mode))
#+end_src

* Org Mode
** Org
   #+begin_src emacs-lisp
     (setq org-startup-folded t
           org-src-window-setup 'current-window
           org-hide-leading-stars t
           ;; Org Link
           org-return-follows-link t
           )

     ;; Visit config.org
     (defun config-visit ()
       (interactive)
       (find-file "~/.config/emacs/config.org"))
     (global-set-key (kbd "C-c e") 'config-visit)

     ;; Reload config.org
     (defun config-reload ()
       "Reloads ~/.config/emacs/config.org at runtime"
       (interactive)
       (org-babel-load-file (expand-file-name "~/.config/emacs/config.org")))
     (global-set-key (kbd "C-c r") 'config-reload)
   #+end_src
